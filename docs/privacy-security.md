# docs/privacy-security.md

## Privacy & security (GDPR-first, PoC)

### Data separation (must)
- **Device ID** (technical, per install) ≠ **Case ID** (pseudonymous) ≠ **Identity** (real person).
- Woman app sees:
  - case ID (pseudonymous)
  - events she entered
  - minimal case metadata (status)
- Midwife app sees:
  - identity mapping (name/contact) + case ID
  - events + alerts

### Data minimization
Collect only what is needed for:
- labor/postpartum monitoring
- midwife workflow
Avoid collecting:
- full address (unless required for home visits; if used, keep only in midwife UI)
- unnecessary demographic fields

### Access control
- Authentication for midwives (OIDC/SSO later; PoC can use email+password + MFA if possible).
- Woman joins a case with a **short code or QR** generated by midwife.
- All API calls are authorized:
  - woman token scoped to one case
  - midwife token scoped to organization + assigned cases

### Transport & storage
- TLS everywhere.
- Encryption at rest (managed Postgres where possible).
- Secrets via environment variables; never in repo.

### Audit trail
All actions create events:
- create/close case
- alert triggered
- alert acknowledged/resolved
- data edits (prefer append-only; if edits are needed, store correction event)

### Retention (PoC default)
- Keep data for pilot duration + short buffer (e.g., 90 days) unless explicitly extended.
- Provide export/delete mechanism for case data (admin/midwife).

### Threat model (PoC)
Primary risks:
- unauthorized access to identity mapping
- leaked join codes
- accidental over-collection

Mitigations:
- short-lived join codes; rotate/regenerate
- rate limit join attempts
- separate tables/schemas for identity mapping
- strict logging hygiene (no PII in logs)

### Pseudonymous identifiers
- `case_id`: UUID v4 or ULID, shown to woman as short code.
- `device_id`: random UUID stored locally.
- Identity mapping table links `case_id` -> person.
